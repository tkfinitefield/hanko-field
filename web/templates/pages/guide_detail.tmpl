{{ define "content" }}
<section class="py-10">
  <div class="mx-auto max-w-5xl space-y-10 px-4 lg:space-y-12">
    <div class="flex flex-col gap-10 lg:flex-row">
      <article class="flex-1 space-y-8">
        <header class="space-y-4">
          <div class="flex flex-wrap items-center gap-3 text-xs text-gray-500">
            {{ if .Guide.CategoryLabel }}<span class="font-semibold text-indigo-600">{{ .Guide.CategoryLabel }}</span>{{ end }}
            {{ if .Guide.PublishDate }}<time datetime="{{ .Guide.PublishISO }}">{{ .Guide.PublishDate }}</time>{{ end }}
            {{ if .Guide.ReadTime }}<span>â€¢ {{ .Guide.ReadTime }}</span>{{ end }}
          </div>
          <h1 class="text-3xl font-semibold text-gray-900">{{ .Guide.Title }}</h1>
          {{ if .Guide.Summary }}<p class="text-lg text-gray-600">{{ .Guide.Summary }}</p>{{ end }}
          {{ if .Guide.Personas }}
            <div class="flex flex-wrap gap-2 text-xs text-gray-500">
              {{ range .Guide.Personas }}<span class="rounded-full bg-gray-100 px-2 py-0.5">{{ . }}</span>{{ end }}
            </div>
          {{ end }}
        </header>

        {{ if .Guide.HeroImageURL }}
          <figure class="overflow-hidden rounded-lg border border-gray-200">
            <img src="{{ .Guide.HeroImageURL }}" alt="{{ .Guide.Title }}" class="w-full object-cover">
          </figure>
        {{ end }}

        <div class="prose prose-indigo max-w-none">
          {{ .Guide.Body }}
        </div>

        {{ if .Guide.Sources }}
          <section class="space-y-3">
            <h2 class="text-xl font-semibold text-gray-900">{{ tlang $.Lang "guides.sources.title" }}</h2>
            <ul class="list-disc space-y-2 pl-5 text-sm">
              {{ range .Guide.Sources }}
                <li><a href="{{ . }}" class="text-indigo-600 hover:underline" target="_blank" rel="noopener">{{ . }}</a></li>
              {{ end }}
            </ul>
          </section>
        {{ end }}

        {{ if .Guide.Related }}
          <section class="space-y-4">
            <h2 class="text-xl font-semibold text-gray-900">{{ tlang $.Lang "guides.related.title" }}</h2>
            <div class="grid gap-4 md:grid-cols-2">
              {{ range .Guide.Related }}
                <a href="{{ .Href }}" class="block rounded-lg border border-gray-200 bg-white p-4 transition hover:border-indigo-400 hover:shadow">
                  <p class="text-xs text-indigo-600">{{ .CategoryLabel }}</p>
                  <h3 class="mt-1 text-base font-semibold text-gray-900">{{ .Title }}</h3>
                  <p class="mt-1 text-sm text-gray-600">{{ .Summary }}</p>
                </a>
              {{ end }}
            </div>
          </section>
        {{ end }}
      </article>

      <aside class="w-full space-y-6 lg:w-72 lg:flex-none">
        <div class="sticky top-24 space-y-6">
          <div class="rounded-lg border border-gray-200 bg-white p-4 shadow-sm">
            <h2 class="text-sm font-semibold text-gray-700">{{ tlang $.Lang "guides.toc.title" }}</h2>
            {{ if .Guide.TOC }}
              <nav class="mt-3 space-y-2 text-sm">
                {{ range .Guide.TOC }}
                  {{ $pad := "pl-0" }}
                  {{ if eq .Level 3 }}{{ $pad = "pl-4" }}{{ end }}
                  {{ if eq .Level 4 }}{{ $pad = "pl-8" }}{{ end }}
                  <a href="#{{ .ID }}" class="block rounded-md px-2 py-1 text-gray-600 transition hover:bg-indigo-50 hover:text-indigo-700 {{ $pad }}">
                    {{ .Text }}
                  </a>
                {{ end }}
              </nav>
            {{ else }}
              <p class="mt-3 text-xs text-gray-500">{{ tlang $.Lang "guides.toc.empty" }}</p>
            {{ end }}
          </div>

          <div class="rounded-lg border border-gray-200 bg-white p-4 shadow-sm">
            <h2 class="text-sm font-semibold text-gray-700">{{ tlang $.Lang "guides.share.title" }}</h2>
            <div class="mt-3 flex flex-wrap gap-2">
              {{ range .Guide.ShareLinks }}
                <a href="{{ .Href }}" target="_blank" rel="noopener" class="inline-flex items-center gap-2 rounded-md border border-gray-200 px-3 py-1.5 text-sm text-gray-700 hover:border-indigo-400">
                  {{ if eq .Icon "x" }}
                    <svg class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M21 3h-3.3L13 9l5 7.5H15l-3-4.8-3 4.8H6l5-7.5-4.7-6H3l7.2 10.5L3 21h3.3L11 15l4 6h3l-7.2-10.4L21 3z"/></svg>
                  {{ else if eq .Icon "facebook" }}
                    <svg class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M22 12a10 10 0 1 0-11.6 9.9v-7h-2v-2.9h2v-2.2c0-2 1.2-3.2 3-3.2.9 0 1.8.16 1.8.16v2h-1c-1 0-1.3.64-1.3 1.3v1.9h2.3L16 14.9h-2.1v7A10 10 0 0 0 22 12"/></svg>
                  {{ else if eq .Icon "line" }}
                    <svg class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 3c-5.5 0-10 3.65-10 8.15 0 4.03 3.57 7.38 8.4 8.01.33.07.78.22.9.5.1.25.07.64.03.9l-.14.86c-.05.25-.2 1 .9.55C17.6 20.9 22 16.87 22 11.15 22 6.65 17.5 3 12 3zm-1.8 11.35h-1.5V9.5h1.5v4.85zm0-5.88h-1.5v-1.5h1.5v1.5zm5.55 5.88h-1.5v-2.45l-1.8 2.45h-1.2V9.5h1.5v2.45L14.55 9.5h1.2v4.85zm3.4 0h-3V9.5h3v1.2h-1.5v.7H19v1.15h-1.35v.7H19v1.2z"/></svg>
                  {{ end }}
                  <span>{{ .Label }}</span>
                </a>
              {{ end }}
            </div>
          </div>

          {{ if .Guide.DownloadURL }}
            <a href="{{ .Guide.DownloadURL }}" class="flex items-center justify-center rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2" target="_blank" rel="noopener">{{ tlang $.Lang "guides.download.pdf" }}</a>
          {{ end }}
        </div>
      </aside>
    </div>
  </div>
</section>
{{ end }}
