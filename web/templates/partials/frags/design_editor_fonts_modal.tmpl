{{ define "frag_design_editor_fonts_modal" }}
{{ $title := "Choose a font" }}
{{ if eq .Lang "ja" }}{{ $title = "書体を選択" }}{{ end }}
{{ template "c_modal" (dict
  "ID" "font-picker-modal"
  "Title" $title
  "Size" "lg"
  "BodyTmpl" "editor_modal_fonts_body"
  "BodyData" .
) }}
{{ end }}

{{ define "editor_modal_fonts_body" }}
<div class="space-y-3">
  <p class="text-xs text-slate-500">{{ if eq .Lang "ja" }}候補から選択するとフォームに反映されます。{{ else }}Pick a font to apply it to your design instantly.{{ end }}</p>
  <div class="grid gap-3">
    {{ range .Fonts }}
      {{ $selected := eq $.Selected .ID }}
      <button type="button"
              class="w-full rounded-lg border px-4 py-3 text-left shadow-sm transition-colors {{ if $selected }}border-indigo-400 bg-indigo-50 text-indigo-900{{ else }}border-slate-200 bg-white text-slate-800 hover:border-indigo-200 hover:bg-indigo-50 hover:text-indigo-800{{ end }}"
              hx-post="/design/editor/form"
              hx-target="#design-editor-form-shell"
              hx-swap="innerHTML"
              hx-include="#design-editor-form"
              hx-vals='{"font":"{{ .ID }}"}'
              hx-on="htmx:afterOnLoad:window.hankoModalClose && window.hankoModalClose()">
        <div class="flex items-start justify-between gap-2">
          <div>
            <p class="text-sm font-semibold">{{ .Name }}</p>
            <p class="text-xs text-slate-500">{{ .Description }}</p>
          </div>
          <span class="rounded-full bg-slate-100 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wide text-slate-600">{{ .Script }}</span>
        </div>
        <div class="mt-3 rounded-md border border-dashed border-slate-300 bg-white px-3 py-2 text-lg tracking-wider text-slate-900">{{ .Sample }}</div>
        {{ if $selected }}
          <p class="mt-2 text-xs font-semibold text-indigo-600">{{ if eq $.Lang "ja" }}現在の選択{{ else }}Currently applied{{ end }}</p>
        {{ end }}
      </button>
    {{ end }}
  </div>
</div>
{{ end }}
