{{ define "frag_design_editor_templates_modal" }}
{{ $title := "Choose a template" }}
{{ if eq .Lang "ja" }}{{ $title = "テンプレートを選択" }}{{ end }}
{{ template "c_modal" (dict
  "ID" "template-picker-modal"
  "Title" $title
  "Size" "lg"
  "BodyTmpl" "editor_modal_templates_body"
  "BodyData" .
) }}
{{ end }}

{{ define "editor_modal_templates_body" }}
<div class="space-y-4">
  <p class="text-xs text-slate-500">{{ if eq .Lang "ja" }}レイアウトを切り替えるとスタイル設定は保持されます。{{ else }}Switch layouts without losing your current style settings.{{ end }}</p>
  <div class="grid gap-3 md:grid-cols-2">
    {{ range .Templates }}
      {{ $selected := eq $.Selected .ID }}
      <button type="button"
              class="flex h-full flex-col rounded-lg border px-4 py-3 text-left shadow-sm transition-colors {{ if $selected }}border-indigo-400 bg-indigo-50 text-indigo-900{{ else }}border-slate-200 bg-white text-slate-800 hover:border-indigo-200 hover:bg-indigo-50 hover:text-indigo-800{{ end }}"
              hx-post="/design/editor/form"
              hx-target="#design-editor-form-shell"
              hx-swap="innerHTML"
              hx-include="#design-editor-form"
              hx-vals='{"template":"{{ .ID }}"}'
              hx-on="htmx:afterOnLoad:window.hankoModalClose && window.hankoModalClose()">
        <div class="flex items-start justify-between gap-2">
          <div>
            <p class="text-sm font-semibold">{{ .Name }}</p>
            <p class="text-xs text-slate-500">{{ .Description }}</p>
          </div>
          {{ if .Badge }}
            <span class="rounded-full bg-amber-100 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wide text-amber-700">{{ .Badge }}</span>
          {{ end }}
        </div>
        <dl class="mt-3 grid grid-cols-2 gap-2 text-[11px] text-slate-500">
          <div><span class="font-medium text-slate-600">{{ if eq $.Lang "ja" }}形状{{ else }}Shape{{ end }}</span> {{ .Shape }}</div>
          <div><span class="font-medium text-slate-600">{{ if eq $.Lang "ja" }}サイズ{{ else }}Size{{ end }}</span> {{ .Size }}</div>
          <div class="col-span-2"><span class="font-medium text-slate-600">{{ if eq $.Lang "ja" }}用途{{ else }}Use case{{ end }}</span> {{ .UseCase }}</div>
        </dl>
        {{ if $selected }}
          <p class="mt-3 text-xs font-semibold text-indigo-600">{{ if eq $.Lang "ja" }}現在の選択{{ else }}Currently applied{{ end }}</p>
        {{ end }}
      </button>
    {{ end }}
  </div>
</div>
{{ end }}
